env:
  potcar_dir: ./data/test_pipeline/potcar
  workspace: /tmp/test_pipeline

runner:
  post_sh: ./data/test_pipeline/post.sh
  post_cmd:
    - 'python3'
    - '-m'
    - 'test.task_server'
    - 'post'
  query_cmd:
    - 'python3'
    - '-m'
    - 'test.task_server'
    - 'query'

jobs:
  - type: vaspjobs
    name: Structure Optimization
    input_collector_list:
      - type: filecollector
        name: INCAR
        path: ./INCAR
      - type: filecollector
        name: POSCAR
        path: ./data/test_pipeline/poscar_all/*
    result_collector_list:
      - type: filecollector
        name: CONTCAR
        path: ./CONTCAR

  - type: vaspjobs
    name: Static Calculation
    input_collector_list:
      - type: filecollector
        name: INCAR
        path: Structure Optimization@INCAR
      - type: filecollector
        name: POSCAR
        path: Structure Optimization@CONTCAR
    result_collector_list:
      - type: filecollector
        name: WAVECAR
        path: ./WAVECAR

  - type: vaspjobs
    name: Optical Calculation
    input_collector_list:
      - type: filecollector
        name: INCAR
        path: Structure Optimization@INCAR
      - type: filecollector
        name: POSCAR
        path: Structure Optimization@POSCAR
      - type: filecollector
        name: WAVECAR
        path: Static Calculation@WAVECAR

  - type: postjobs
    name: Transmission Optic



